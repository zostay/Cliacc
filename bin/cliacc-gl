#!/usr/bin/env perl
use v5.14;

use FindBin;
use lib "$FindBin::Bin/../lib";
use Cliacc::DB;
use Cliacc::Service::Ledger;

my $db = Cliacc::DB->new( root => "$FindBin::Bin/.." );
my $ledgers = Cliacc::Service::Ledger->new( db => $db );

my @lines = $ledgers->list_ledger_lines;

for my $line (@lines) {
    my ($left, $right) = ('', '');
    if ($line->is_left) {
        $left = sprintf "%8.2f", $line->left_amount;
    }
    else {
        $right = sprintf "%8.2f", $line->right_amount;
    }

    printf "%-03d %-3s %-20s %-10s %8s %8s\n",
        $line->line, $line->reference_number // '-',
        $line->description, $line->name, 
        $left, $right;
} 
