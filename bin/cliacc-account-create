#!/usr/bin/env perl
use v5.14;

use FindBin;
use lib "$FindBin::Bin/../lib";
use Cliacc::DB;
use Cliacc::Service::Account;

use Getopt::Long;

my $name;
my $left = 0;
my $right = 0;

GetOptions(
    'n|name=s' => \$name,
    'l|left'   => \$left,
    'r|right'  => \$right,
);

die "Please set --name." unless $name;
my $account_type = $left  ? 'left'
                 : $right ? 'right'
                 :          die "Please set --left or --right.";

my $db = Cliacc::DB->new( root => "$FindBin::Bin/.." );
my $service = Cliacc::Service::Account->new( db => $db );

my $account = Cliacc::Model::Account->new(
    name         => $name,
    account_type => $account_type,
);

$service->create_account($account);
